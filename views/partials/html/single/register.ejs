<style>
    main {
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .outer-segment {
        margin: 4rem 0;
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    @media(max-width: 999px) {
        .segment {
            width: 20rem;
        }
    }
    @media(min-width: 1000px) {
        .segment {
            width: 30rem;
        }
    }
    .field input:-webkit-autofill::first-line {font-size: 1.2rem}
    .field {
        margin: 2rem 0rem;
        color: var(--fdl-secondary);
    }
    .field label {
        display: block;
        font-weight: 500;
        padding-bottom: 0.2rem;
    }
    .email-label {
        display: inline-flex;
        justify-content: space-between;
        width: 100%;
    }
    .field a {
        color: var(--primary-color);
    }
    .field a:hover, .field a:focus {
        color: var(--primary-dark-color);
    }
    .form-checkbox {
        margin: 0;
        margin-right: 0.3rem;
        padding: 0.3rem;
        width: 1rem;
        height: 1rem;
        appearance: none;
        -webkit-appearance: none;
        border: 0.2rem solid var(--fdl-secondary);
        -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
        -moz-box-sizing: border-box;    /* Firefox, other Gecko */
        box-sizing: border-box;         /* Opera/IE 8+ */
        border-radius: 50%;
    }
    .form-checkbox:hover {
        cursor: pointer;
    }
    .form-checkbox:focus, .form-checkbox:hover {
        outline: none !important;
        border: 0.2rem solid var(--fdl-dark-secondary);
        opacity: 0.8;
    }
    .form-checkbox:checked {
        background-color: var(--primary-color);
    }
    .login-input {
        width: 100%;
        font-size: 1.2rem;
        padding: 1.3rem 1.3rem;
        display: inline-block;
        border: 0.2rem solid var(--fdl-secondary);
        border-radius: 0.2rem;
        -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
        -moz-box-sizing: border-box;    /* Firefox, other Gecko */
        box-sizing: border-box;         /* Opera/IE 8+ */
    }
    .login-input:focus {
        outline: none !important;
        border: 0.2rem solid var(--primary-color);
        border-radius: 0.2rem;
        -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
        -moz-box-sizing: border-box;    /* Firefox, other Gecko */
        box-sizing: border-box;         /* Opera/IE 8+ */
    }
    .segment button {
        background-color: var(--primary-color);
        color: var(--button-color);
        font-size: 1.2rem;
        padding: 1rem;
        border: none;
        border-radius: 0.2rem;
        cursor: pointer;
        width: 100%;
    }
    #sign-up {
        -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
        -moz-box-sizing: border-box;    /* Firefox, other Gecko */
        box-sizing: border-box;         /* Opera/IE 8+ */
        padding: 1rem;
        text-align: center;
        width: 100%;
    }
    #sign-up a {
        color: var(--fdl-secondary);
        text-decoration: underline;
    }
    .checkbox-toggle {
        -webkit-user-select: none;      
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        margin-top: 1rem;
        display: inline-flex !important;
        align-items: center;
    }
    .checkbox-toggle:hover {
        cursor: pointer;
    }
    .segment button:hover,
    .segment button:focus, 
    #sign-up a:hover, 
    #sign-up a:focus {
        opacity: 0.8;
    }
    #login-title {
        font-size: 3rem;
        color: var(--fdl-secondary);
        text-align: center;
        margin-top: 0;
        margin-bottom: -1rem;
    }
    .login-error {
        color: #ff4242;
        display: block;
        margin-top: 0.3rem;
        font-size: 0.8rem;
    }
</style>
<div class="outer-segment">
    <div class="segment">
        <h1 id="login-title">Registrieren</h1>
        <form id="login-form" novalidate method="post" action="/konto/register?redir=<%- redir %>">
            <div class="field">
                <label for="nick">Name</label>
                <input tabindex="1" spellcheck="false" class="login-input" type="text" autocomplete="text" name="nick" placeholder="Dein Spitzname" value="" maxlength="33">
                <% if (login_error && login_error.type === "nick") { %>
                    <span class="login-error"><%= login_error.message %></span>
                    <style>
                        .field input[type=text][name=nick] {
                            border: 0.2rem solid var(--error-color);
                        }
                    </style>
                <% } %>
            </div>
            <div class="field">
                <div class="email-label">
                    <label for="email">Email</label>
                    <span><a href="/info/Wie kann ich ein Konto erstellen" tabindex="1">Email registrieren?</a></span>
                </div>
                <input tabindex="1" spellcheck="false" class="login-input" type="email" name="email" placeholder="Deine Email Addresse" value="" maxlength="254">
                <% if (login_error && login_error.type === "email") { %>
                    <span class="login-error"><%= login_error.message %></span>
                    <style>
                        .field input[type=email] {
                            border: 0.2rem solid var(--error-color);
                        }
                    </style>
                <% } %>
            </div>
            <div class="field">
                <label for="password">Passwort</label>
                <input tabindex="2" badinput="false" spellcheck="false" class="login-input" id="password-input" type="password" name="password" placeholder="Dein Passwort" value="">
                <% if (login_error && login_error.type === "password") { %>
                    <span class="login-error"><%= login_error.message %></span>
                    <style>
                        .field input[id=password-input] {
                            border: 0.2rem solid var(--error-color);
                        }
                    </style>
                <% } %>
                <label for="show-password" class="checkbox-toggle">
                    <input type="checkbox" class="form-checkbox" id="show-password" tabindex="3"/>
                    Passwort anzeigen.
                </label>
                <br>
                <label for="tos" class="checkbox-toggle">
                    <input type="checkbox" class="form-checkbox" name="tos" value="true" id="tos" tabindex="3"/>
                    <span>Ich habe die <a href="/agb">AGB</a> und <a href="/datenschutz" tabindex="3">Datenschutzrichtlinien</a> durchgelesen und bin mit ihnen Einverstanden.</span>
                </label>
                <script>
                    document.getElementById("show-password").addEventListener("click", () => {
                        var pw_input = document.getElementById("password-input");
                        pw_input.type = pw_input.type == "password" ? "text" : "password";
                    }, false);
                </script>
            </div>
            <input type="hidden" name="redir" value="<%- redir %>">
        </form>
        <% if (login_error && login_error.type === "register") { %>
            <style>
                .login-failed-container {
                    background-color: var(--error-color);
                    text-align: center;
                    padding: 0.6rem;
                    margin-top: -1.5rem;
                    margin-bottom: 0.5rem;
                    border-radius: 0.2rem;
                }
                .login-failed-container a {
                    color: var(--button-color);
                    text-decoration: underline;
                }
            </style>
            <div class="login-failed-container">
                <span><%- login_error.message %></span>
            </div>
        <% } %>
        <button tabindex="3" type="submit" form="login-form">Registrieren</button>
        <div id="sign-up">
            <a href="/konto/login?redir=<%= redir %>" tabindex="4">Anmelden?</a>
        </div>
    </div>
</div>
